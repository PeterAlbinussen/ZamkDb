@page
@model ZamkDb.Pages.Courses.GetAllCoursesModel
@using Microsoft.AspNet.Identity
@{
//var id = User.Identity.GetUserId();
//Model.Course.UserId = id;
}


@*Denne kode laver en ny create knap for hvert rute der er oprettet?? hjælp*@

@*@foreach (var p in Model.Courses)
{
    @if (User.Identity.GetUserId() == p.UserId )
    {
        <p>
            <a asp-page="/Courses/Create">Create New Course</a>
        </p>
    }

}*@


<p>
    <a asp-page="/Courses/Create">Create New Course</a>
</p>

@*@if (User.Identity.GetUserId() == id)
{
    <p>
        <a asp-page="/Courses/Create">Create New Course</a>
    </p>
}*@




@*<table class="table">
		<thead>
			<tr>
				<th> Start DateTime</th>
				<th> End DateTime </th>
				<th> Zealand Location </th>
				<th> Start Location </th>
				<th> End Location </th>
			</tr>
		</thead>
		<tbody>

		@if (Model.Courses.Count() != 0)
		{
			@foreach (var item in Model.Courses)
			{
			<tr>
				<td>@item.StartDateTime  </td>
				<td>@item.EndDateTime </td>
				<td>@item.ZealandLocation </td>
				<td>@item.StartLocation </td>
				<td>@item.EndLocation </td>

				<td>
					<p>
						<a asp-page="/Courses/Detail" asp-route-tid="@item.CourseId">Details </a>
					</p>
				</td>
				<td>
					<p>
						<a asp-page="/Bookings/Create" asp-route-tid="@item.CourseId">Book </a>
					</p>
				</td>
			</tr>
			}
		}
	</table>*@

<h4 style="color:seagreen"> List of my Courses</h4>
<form>
    <p>
        Search: <input type="text" asp-for="FilterCriteria" />
        <input type="submit" value="Filter" />
    </p>
</form>
<div class="container">
	<div class="row">
		@foreach (var p in Model.Courses)
		{
			@if (User.Identity.GetUserId() == p.UserId)
			{


				<div class="col-sm">
					<div class="card" style="width: 15rem;">
						<img class="card-img-top" src="~/img/GoogleMaps.png" alt="Card image cap">
						<div class="card-body">
							<h5 class="card-title">Zealand Location: @p.ZealandLocation</h5>
							@*<p class="card-text">Startpoint: @p.StartLocation</p>
		<p class="card-text">Endpoint: @p.EndLocation</p>
		<p class="card-text">Start time: @p.StartDateTime</p>
		<p class="card-text">ETA: @p.EndDateTime</p>*@
							@*<p class="card-text">Driver: @p.User.Name</p>*@
							<a asp-page="/Courses/Detail" asp-route-id="@p.CourseId" class="btn btn-primary">More information</a>
							
							@*<a asp-page="/Bookings/Create" asp-route-tid="@p.CourseId" class="btn btn-primary">Book </a>*@
							@if (User.Identity.GetUserId() == p.UserId)
							{
							    <a asp-page="Delete" asp-route-id="@p.CourseId" class="btn btn-danger m-1">Delete</a>
							    <a asp-page="Edit" asp-route-id="@p.CourseId" class="btn btn-primary m-1">Edit</a>

							}
							
						
							@*<a asp-page="/Courses/Registration" asp-route-cid="@p.CourseId" class="btn btn-primary">Show courses</a>*@
						</div>
					</div>
					<br />
				</div>
			}
		}
	</div>
</div>

<h4 style="color:seagreen"> List of Courses</h4>
<form>
    <p>
        Search: <input type="text" asp-for="FilterCriteria1" />
        <input type="submit" value="Filter" />
    </p>
</form>
<div class="container">
	<div class="row">
		@foreach (var p in Model.Courses)
		{
			@if (User.Identity.GetUserId() != p.UserId)
			{


				<div class="col-sm">
					<div class="card" style="width: 20rem;">
						<img class="card-img-top" src="~/img/GoogleMaps.png" alt="Card image cap" >
						<div class="card-body">
							<h5 class="card-title">Zealand Location: @p.ZealandLocation</h5>
							<p class="card-text">Startpoint: @p.StartLocation</p>
							<p class="card-text">Endpoint: @p.EndLocation</p>
							<p class="card-text">Start time: @p.StartDateTime</p>
							<p class="card-text">ETA: @p.EndDateTime</p>
							@*<p class="card-text">Driver: @p.User.Name</p>*@
							<a asp-page="/Courses/Detail" asp-route-id="@p.CourseId" class="btn btn-primary">More information</a>
                            <a asp-page="/Bookings/Create" asp-route-tid="@p.CourseId" class="btn btn-primary">Book </a>
                           
							@if (User.Identity.GetUserId() == p.UserId)
							{
							    <a asp-page="Delete" asp-route-id="@p.CourseId" class="btn btn-danger m-1">Delete</a>
							    <a asp-page="Edit" asp-route-id="@p.CourseId" class="btn btn-primary m-1">Edit</a>
							   
							}
							
							

                            @*<a asp-page="/Courses/Registration" asp-route-cid="@p.CourseId" class="btn btn-primary">Show courses</a>*@
						</div>
					</div>
					<br />
				</div>
			}
		}
	</div>
</div>